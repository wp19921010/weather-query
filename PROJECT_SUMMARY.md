# å¤©æ°”æŸ¥è¯¢ API é¡¹ç›®æ€»ç»“

## é¡¹ç›®å®Œæˆæƒ…å†µ âœ…

æˆåŠŸæ­å»ºäº†ä¸€ä¸ªå®Œæ•´çš„ **NestJS + TypeScript** å¤©æ°”æŸ¥è¯¢åç«¯é¡¹ç›®ã€‚

## æ ¸å¿ƒç‰¹æ€§

### 1. **ä¸‰ç§æŸ¥è¯¢æ–¹å¼**
- æŒ‰åŸå¸‚åç§°æŸ¥è¯¢å¤©æ°”
- æŒ‰åœ°ç†åæ ‡ï¼ˆçº¬åº¦/ç»åº¦ï¼‰æŸ¥è¯¢å¤©æ°”
- è·å–é»˜è®¤åŸå¸‚ï¼ˆåŒ—äº¬ï¼‰å¤©æ°”

### 2. **å®Œæ•´çš„é¡¹ç›®ç»“æ„**
```
coze-plugin-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ weather/
â”‚   â”‚   â”œâ”€â”€ weather.service.ts      # å¤©æ°”ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ weather.controller.ts   # API è·¯ç”±å®šä¹‰
â”‚   â”‚   â””â”€â”€ weather.module.ts       # æ¨¡å—å®šä¹‰
â”‚   â”œâ”€â”€ app.module.ts               # ä¸»åº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ app.controller.ts           # ä¸»æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ app.service.ts              # ä¸»æœåŠ¡
â”‚   â””â”€â”€ main.ts                     # åº”ç”¨å¯åŠ¨å…¥å£
â”œâ”€â”€ dist/                           # ç¼–è¯‘è¾“å‡ºç›®å½•
â”œâ”€â”€ node_modules/                   # ä¾èµ–åŒ…
â”œâ”€â”€ test/                           # æµ‹è¯•ç›®å½•
â”œâ”€â”€ package.json                    # é¡¹ç›®é…ç½®
â”œâ”€â”€ tsconfig.json                   # TypeScript é…ç½®
â”œâ”€â”€ .env                            # ç¯å¢ƒå˜é‡ï¼ˆéœ€æ‰‹åŠ¨é…ç½®ï¼‰
â”œâ”€â”€ .env.example                    # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”œâ”€â”€ .gitignore                      # Git å¿½ç•¥æ–‡ä»¶
â”œâ”€â”€ API_DOCS.md                     # å®Œæ•´ API æ–‡æ¡£
â”œâ”€â”€ QUICKSTART.md                   # å¿«é€Ÿå¼€å§‹æŒ‡å—
â””â”€â”€ test.http                       # HTTP æµ‹è¯•ç¤ºä¾‹
```

## å®‰è£…çš„ä¾èµ–

### æ ¸å¿ƒä¾èµ–
- `@nestjs/common` - NestJS æ ¸å¿ƒåº“
- `@nestjs/core` - NestJS æ ¸å¿ƒåŠŸèƒ½
- `@nestjs/platform-express` - Express å¹³å°é€‚é…å™¨
- `@nestjs/config` - é…ç½®ç®¡ç†æ¨¡å—
- `axios` - HTTP å®¢æˆ·ç«¯
- `dotenv` - ç¯å¢ƒå˜é‡ç®¡ç†
- `rxjs` - å“åº”å¼ç¼–ç¨‹åº“
- `reflect-metadata` - åå°„å…ƒæ•°æ®åº“

### å¼€å‘ä¾èµ–
- `typescript` - TypeScript ç¼–è¯‘å™¨
- `@nestjs/cli` - NestJS å‘½ä»¤è¡Œå·¥å…·
- `@nestjs/schematics` - NestJS ä»£ç ç”Ÿæˆå™¨
- `jest` - æµ‹è¯•æ¡†æ¶
- `ts-jest` - TypeScript Jest æ”¯æŒ
- `eslint` - ä»£ç æ£€æŸ¥å·¥å…·
- `prettier` - ä»£ç æ ¼å¼åŒ–å·¥å…·

## API ç«¯ç‚¹

### 1. æŒ‰åŸå¸‚åæŸ¥è¯¢
```
GET /weather/city?name=åŒ—äº¬
```

### 2. æŒ‰åæ ‡æŸ¥è¯¢
```
GET /weather/coordinates?lat=39.9042&lon=116.4074
```

### 3. é»˜è®¤æŸ¥è¯¢
```
GET /weather/default
```

## å“åº”æ ¼å¼

```json
{
  "city": "åŒ—äº¬",
  "temperature": 5.2,
  "description": "æ™´",
  "humidity": 45,
  "windSpeed": 3.5,
  "pressure": 1013
}
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. é…ç½® API Key
```bash
cp .env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶ï¼Œå¡«å…¥ä½ çš„ OpenWeatherMap API Key
```

### 3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run start:dev
```

### 4. æµ‹è¯• API
```bash
curl "http://localhost:3000/weather/city?name=åŒ—äº¬"
```

## å¸¸ç”¨å‘½ä»¤

| å‘½ä»¤ | åŠŸèƒ½ |
|------|------|
| `npm install` | å®‰è£…ä¾èµ– |
| `npm run start:dev` | å¼€å‘æ¨¡å¼å¯åŠ¨ï¼ˆå¸¦çƒ­é‡è½½ï¼‰ |
| `npm run start` | æ­£å¸¸å¯åŠ¨ |
| `npm run build` | æ„å»ºé¡¹ç›® |
| `npm run start:prod` | ç”Ÿäº§æ¨¡å¼å¯åŠ¨ |
| `npm run lint` | ä»£ç æ£€æŸ¥ |
| `npm run format` | ä»£ç æ ¼å¼åŒ– |
| `npm test` | è¿è¡Œæµ‹è¯• |

## è·å– API Key

1. è®¿é—® [https://openweathermap.org/api](https://openweathermap.org/api)
2. ç‚¹å‡» "Sign Up" æ³¨å†Œè´¦æˆ·
3. ç™»å½•åè®¿é—® API Key é¡µé¢
4. å¤åˆ¶ä½ çš„ API Key
5. ç²˜è´´åˆ° `.env` æ–‡ä»¶ä¸­

## é¡¹ç›®ä¼˜åŠ¿

âœ¨ **ç°ä»£åŒ–æ¡†æ¶** - ä½¿ç”¨æœ€æ–°çš„ NestJS ç‰ˆæœ¬
ğŸ”’ **ç±»å‹å®‰å…¨** - å®Œæ•´çš„ TypeScript æ”¯æŒ
ğŸ“š **å®Œæ•´æ–‡æ¡£** - API æ–‡æ¡£ã€å¿«é€Ÿå¼€å§‹æŒ‡å—ã€æµ‹è¯•ç”¨ä¾‹
ğŸ—ï¸ **æ¨¡å—åŒ–è®¾è®¡** - æ¸…æ™°çš„åŠŸèƒ½æ¨¡å—åˆ’åˆ†
ğŸ”„ **çƒ­é‡è½½** - å¼€å‘æ—¶è‡ªåŠ¨é‡æ–°åŠ è½½
ğŸ“ **ä»£ç è§„èŒƒ** - ESLint + Prettier ä»£ç è§„èŒƒå·¥å…·
âœ… **æµ‹è¯•å°±ç»ª** - Jest æµ‹è¯•æ¡†æ¶å·²é…ç½®

## æ–‡æ¡£èµ„æº

- **API_DOCS.md** - è¯¦ç»†çš„ API æ–‡æ¡£å’Œä½¿ç”¨ç¤ºä¾‹
- **QUICKSTART.md** - 5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹æŒ‡å—
- **test.http** - HTTP è¯·æ±‚æµ‹è¯•ç¤ºä¾‹ï¼ˆæ”¯æŒ VS Codeã€Postmanï¼‰
- **README.md** - é¡¹ç›®é»˜è®¤ README

## ä¸‹ä¸€æ­¥æ‰©å±•å»ºè®®

- [ ] æ·»åŠ  Redis ç¼“å­˜å‡å°‘ API è°ƒç”¨
- [ ] å®ç°æ•°æ®åº“å­˜å‚¨æŸ¥è¯¢å†å²
- [ ] æ·»åŠ å¤©æ°”é¢„æŠ¥åŠŸèƒ½
- [ ] å®ç°ç”¨æˆ·è®¤è¯åŠŸèƒ½
- [ ] æ·»åŠ è¯·æ±‚é™æµä¿æŠ¤
- [ ] æ”¯æŒæ›´å¤šå¤©æ°”æ•°æ®æº
- [ ] å®ç° GraphQL API
- [ ] æ·»åŠ  WebSocket å®æ—¶æ›´æ–°

## æ•…éšœæ’æŸ¥

### API Key æ— æ•ˆ
- ç¡®ä¿å·²åœ¨ OpenWeatherMap å®˜ç½‘æ³¨å†Œè´¦æˆ·
- API Key å¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ‰èƒ½æ¿€æ´»
- æ£€æŸ¥æ˜¯å¦æ­£ç¡®å¡«å…¥ .env æ–‡ä»¶

### ç«¯å£è¢«å ç”¨
- ä¿®æ”¹ .env æ–‡ä»¶ä¸­çš„ PORT å˜é‡
- æˆ–ä½¿ç”¨å‘½ä»¤: `PORT=5000 npm start`

### æ„å»ºå¤±è´¥
- åˆ é™¤ node_modules å’Œ package-lock.json
- é‡æ–°æ‰§è¡Œ `npm install`

## è®¸å¯è¯

MIT License - å¯è‡ªç”±ä½¿ç”¨å’Œä¿®æ”¹

---

**é¡¹ç›®åˆ›å»ºæ—¶é—´**: 2025-11-11
**Node.js ç‰ˆæœ¬**: v22+
**NestJS ç‰ˆæœ¬**: v11+
**TypeScript ç‰ˆæœ¬**: v5.7+
